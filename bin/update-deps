#!/bin/sh -e
#
# Copyright (c) 2022 Dustin Lyons <dustin@zeroedlabs.com>

VERSION=1.0

GREEN='\033[1;32m'
RED='\033[1;31m'
CLEAR='\033[0m'

_print() {
    if [ "$(uname)" == "Darwin" ]; then
       echo $@
    else
       echo -e $@
    fi
}

_print "${GREEN}Running git commands...${CLEAR}"
git -C ~/State/Projects/Code/nixpkgs merge upstream/master master
git -C ~/State/Projects/Code/nixpkgs push origin master
git -C ~/State/Projects/Code/emacs-overlay merge upstream/master master
git -C ~/State/Projects/Code/emacs-overlay push origin master

_print "${GREEN}Updating flake...${CLEAR}"
nix flake update

_print "${GREEN}Done!${CLEAR}"
